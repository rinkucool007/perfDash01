<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Prediction | Performance Testing Dashboard</title>

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .sidebar {
            transition: all 0.3s;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .prediction-card {
            transition: all 0.3s;
        }
        .prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Sidebar (Desktop) -->
    <div class="fixed inset-y-0 left-0 bg-white shadow-lg w-64 px-4 py-6 hidden md:block sidebar">
        <div class="flex items-center mb-8">
            <img src="logo.png" alt="Company Logo" class="h-8 mr-2">
            <span class="text-xl font-semibold text-gray-800">PerfAI</span>
        </div>
        <nav>
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">DASHBOARD</h3>
                <a href="dashboard.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100">
                    <i data-feather="home" class="mr-3 text-gray-500"></i>
                    Home
                </a>
            </div>
            <div class="mb-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">PROJECTS</h3>
                <a href="project-a.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project A
                </a>
                <a href="project-b.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project B
                </a>
                <a href="project-c.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project C
                </a>
                <a href="project-d.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project D
                </a>
                <a href="project-e.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project E
                </a>
                <a href="project-f.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project F
                </a>
                <a href="project-g.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 mb-1">
                    <i data-feather="folder" class="mr-3 text-gray-500"></i>
                    Project G
                </a>
            </div>
            <div>
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">AI TOOLS</h3>
                <a href="ai-prediction.html" class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-white bg-blue-100 text-blue-800">
                    <i data-feather="activity" class="mr-3 text-blue-600"></i>
                    AI Prediction
                </a>
            </div>
        </nav>
    </div>

    <!-- Mobile Header -->
    <div class="md:hidden bg-white shadow-sm">
        <div class="flex items-center justify-between px-4 py-3">
            <div class="flex items-center cursor-pointer" id="botLogo">
                <img src="logo.png" alt="Company Logo" class="h-8 mr-2">
                <span class="text-lg font-semibold text-gray-800">PerfAI</span>
            </div>
            <button id="mobileMenuButton" class="text-gray-500">
                <i data-feather="menu"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="md:ml-64">
        <main class="p-6">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">AI Predictive Analysis</h1>
                    <p class="text-sm text-gray-500">Performance forecasting and recommendations</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                            <i data-feather="user" class="text-blue-600"></i>
                        </div>
                        <span class="text-sm font-medium text-gray-700">Admin</span>
                    </div>
                    <button onclick="window.location.href='index.html'" class="ml-4 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors text-sm font-medium">Logout</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Prediction Controls -->
                <div class="bg-white rounded-lg shadow p-6 lg:col-span-1">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Select Project</h2>
                    <select class="w-full p-2 border border-gray-300 rounded-md mb-4">
                        <option>Project A</option>
                        <option>Project B</option>
                        <option>Project C</option>
                        <option>Project D</option>
                        <option>Project E</option>
                        <option>Project F</option>
                        <option>Project G</option>
                    </select>

                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Prediction Parameters</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Time Horizon (days)</label>
                            <input type="number" class="w-full p-2 border border-gray-300 rounded-md" value="30">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Expected Load Increase</label>
                            <input type="number" class="w-full p-2 border border-gray-300 rounded-md" value="25" placeholder="%">
                        </div>
                        <button class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">
                            Generate Prediction
                        </button>
                    </div>
                </div>

                <!-- Prediction Results -->
                <div class="bg-white rounded-lg shadow p-6 lg:col-span-2">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-lg font-semibold text-gray-800">Performance Forecast</h2>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100">
                                <i data-feather="download" class="w-4 h-4 inline mr-1"></i>
                                Export
                            </button>
                        </div>
                    </div>

                    <div class="chart-container mb-8">
                        <canvas id="predictionChart"></canvas>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="text-sm font-medium text-blue-800 mb-1">Predicted Bottleneck</h3>
                            <p class="text-gray-800">Database throughput at 85% capacity</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h3 class="text-sm font-medium text-green-800 mb-1">Recommended Action</h3>
                            <p class="text-gray-800">Scale database tier before peak load</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chatbot Button -->
            <div id="chatbotButton" class="fixed bottom-6 right-6 z-50 cursor-pointer">
                <div class="bg-blue-600 rounded-full p-4 shadow-lg hover:bg-blue-700 transition-colors">
                    <i data-feather="message-circle" class="text-white w-6 h-6"></i>
                </div>
            </div>

            <!-- Chatbot Modal -->
            <div id="chatbotModal" class="fixed bottom-24 right-6 z-50 hidden w-80 flex flex-col">
                <div class="bg-white rounded-lg shadow-xl w-full max-w-md h-96 flex flex-col">
                    <div class="flex justify-between items-center p-4 border-b">
                        <h3 class="text-lg font-semibold">AI Performance Assistant</h3>
                        <button id="closeChatbot" class="text-gray-500 hover:text-gray-700">
                            <i data-feather="x"></i>
                        </button>
                    </div>
                    <div id="chatMessages" class="flex-1 p-4 overflow-y-auto">
                        <div class="chat-message mb-3">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                                    <i data-feather="cpu" class="text-blue-600"></i>
                                </div>
                                <div class="bg-blue-50 rounded-lg p-3">
                                    <p class="text-sm text-gray-800">Hello! I'm your AI performance assistant. Ask me anything about performance testing or optimization.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border-t">
                        <div class="flex items-center">
                            <input id="chatInput" type="text" placeholder="Ask a question..." class="flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <button id="sendMessage" class="bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700">
                                <i data-feather="send" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Initialize Feather Icons
            feather.replace();

            // Chatbot Elements
            const chatbotButton = document.getElementById("chatbotButton");
            const chatbotModal = document.getElementById("chatbotModal");
            const closeChatbot = document.getElementById("closeChatbot");
            const chatMessages = document.getElementById("chatMessages");
            const chatInput = document.getElementById("chatInput");
            const sendMessage = document.getElementById("sendMessage");
            const botLogo = document.getElementById("botLogo");

            // Open chat on logo or chat button click
            [botLogo, chatbotButton].forEach(el => {
                el?.addEventListener("click", () => {
                    chatbotModal.classList.remove("hidden");
                    chatbotButton.classList.add("hidden");
                });
            });

            // Close chat
            closeChatbot.addEventListener("click", () => {
                chatbotModal.classList.add("hidden");
                chatbotButton.classList.remove("hidden");
            });

            // Add message to chat
            function addMessage(message, isUser = false) {
                const messageDiv = document.createElement("div");
                messageDiv.className = `chat-message mb-3 ${isUser ? 'text-right' : ''}`;

                const icon = isUser ? "user" : "cpu";
                const bgClass = isUser ? "bg-gray-100" : "bg-blue-50";
                const margin = isUser ? "ml-2" : "mr-2";
                const flexDir = isUser ? "flex-row-reverse" : "";

                messageDiv.innerHTML = `
                    <div class="flex items-start ${flexDir}">
                        <div class="flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 ${margin} flex items-center justify-center">
                            <i data-feather="${icon}" class="${isUser ? 'text-gray-600' : 'text-blue-600'}"></i>
                        </div>
                        <div class="${bgClass} rounded-lg p-3 max-w-xs">
                            <p class="text-sm text-gray-800">${message}</p>
                        </div>
                    </div>
                `;

                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                feather.replace(); // Re-render icons
            }

            // Handle sending messages
            function handleSendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;

                addMessage(message, true);
                chatInput.value = '';

                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "Based on your test data, I recommend increasing the database connection pool size.",
                        "The predicted bottleneck appears to be in the authentication service at 1500 TPS.",
                        "Looking at historical data, you should scale your web servers before the next peak load.",
                        "I've analyzed the error patterns and suggest implementing retry logic for the payment service.",
                        "The performance metrics indicate your API gateway will need additional resources at 2000 RPS."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse, false);
                }, 1000);
            }

            sendMessage.addEventListener("click", handleSendMessage);
            chatInput.addEventListener("keypress", e => {
                if (e.key === "Enter") handleSendMessage();
            });

            // Initialize Chart
            const ctx = document.getElementById("predictionChart").getContext("2d");
            new Chart(ctx, {
                type: "line",
                data: {
                    labels: ["Week 1", "Week 2", "Week 3", "Week 4"],
                    datasets: [
                        {
                            label: "Current Performance",
                            data: [1200, 1250, 1300, 1350],
                            borderColor: "#3b82f6",
                            backgroundColor: "rgba(59, 130, 246, 0.05)",
                            borderDash: [5, 5],
                            tension: 0.4
                        },
                        {
                            label: "Predicted Performance",
                            data: [1200, 1150, 1100, 1050],
                            borderColor: "#ef4444",
                            backgroundColor: "rgba(239, 68, 68, 0.05)",
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: "Predicted with Scaling",
                            data: [1200, 1300, 1400, 1500],
                            borderColor: "#10b981",
                            backgroundColor: "rgba(16, 185, 129, 0.05)",
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: "top" },
                        tooltip: { mode: "index", intersect: false }
                    },
                    scales: {
                        y: {
                            title: { display: true, text: "Transactions Per Second" },
                            beginAtZero: false
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>